<?xml version="1.0" encoding="UTF-8"?>

<sample>

  <name>barcode4j</name>
  <title>Barcode4J Sample</title>
  <description>Shows how barcodes could be included in reports using the Barcode4J component.</description>

  <mainFeature ref="barcodes"/>
  <mainFeature ref="barcode4j"/>
  
  <!-- barcodes -->
  
  <feature name="barcodes" title="Barcodes">
    <description>
Shows how to render barcodes in a report, using the barcode components that are shipped with the JasperReports library.
    </description>
    <since>3.5.2</since>
    <documentedBy>
      <author>
    	<name>Sanda Zaharia</name>
    	<email>shertage@users.sourceforge.net</email>
      </author>
    </documentedBy>
  	<otherSample ref="barbecue"/>
    <content>
<b>Barcode Overview</b>    
<br/>
<br/>
A barcode denotes an encoded graphical representation of data which can be read/decoded using dedicated scanning devices such as 
barcode scanners. Due to its exceptional ability to completely characterize a given product, the barcode technology became one of 
the most common product registering technologies. It consists in computing a graphical "fingerprint" for a given object based on 
a unique digit/character sequence mapped to the object. Once generated, the barcode uniquely identifies the product. When scanned, 
the barcode allows retrieving the original data it was built on, in order to be visualized or printed out.
<br/>
<br/>
<b>Barcode Symbologies</b>    
<br/>
<br/>
The whole "fingerprint" graphics is computed from elementary fingerprints of single digits/characters in the sequence. There are 
several ways to map individual characters or digits to a graphical representation. These mappings are specified in the so-called 
barcode symbologies. Some very common symbology categories are:
<ul>
<li>linear vs. 2D
<ul>
<li>linear - represent data by varying the widths and spacings of parallel lines. Are optimized for laser scanners.</li>
<li>2D - use rectangles, dots, hexagons and other 2D geometric patterns to represent data. Are optimized for image-based scanners.</li>
</ul>
</li>
<li>continuous vs. discrete
<ul>
<li>continuous - one character ends with a space and the next begins with the next bar, etc.</li>
<li>discrete - any character begins and ends with bars; the space between consecutive characters is ignored</li>
</ul>
</li>
<li>two-width vs. many-width
<ul>
<li>two-width - bars and spaces are either wide or narrow. The exact width of a bar/space has no meaning by itself.</li>
<li>many-width - bars and spaces may have only predefined width values, multiple of a basic width called "module". Usually a 
bar/space width can count up to 4 modules.</li>
</ul>
</li>
</ul>
Some of linear symbologies are highly standardized, some others are niche-oriented, most of them presenting mixed features. Below are 
few examples:
<ul>
<li><code>Universal Product Code (UPC)</code> - International Standard ISO/IEC 15420. There are 5 versions of the UPC symbology designed for future 
industry requirements: <code>UPC A, B, C, D, E</code>.</li>
<li><code>Codabar</code> - Outdated format used in libraries, blood banks and on air waybills. Not standardized.</li>
<li><code>Code 25 – Interleaved 2 of 5</code> - Used in wholesales and libraries. International standard ISO/IEC 16390</li>
<li><code>Code 39</code> - International standard ISO/IEC 16388</li>
<li><code>Code 128</code> – International Standard ISO/IEC 15417</li>
<li><code>EAN-8</code> - International Standard ISO/IEC 15420</li>
<li><code>EAN-13</code> - International Standard ISO/IEC 15420</li>
<li><code>JAN</code> - Available for Japan, compatible with EAN-13 (ISO/IEC 15420)</li>
<li>etc.</li>
</ul>
Some of the 2D symbologies are enumerated below:
<ul>
<li><code>Aztec Code</code> - International Standard ISO/IEC 24778</li>
<li><code>Codablock</code> - Not standardized.</li>
<li><code>Code 16K</code> - Based on linear <code>Code 128</code>.</li>
<li><code>Data Matrix</code> - Used throughout the United States. Standard ISO/IEC 16022:2000(E)</li>
<li><code>EZcode</code> - Designed for decoding by cameraphones.</li>
<li><code>PDF417</code> - Standard ISO/IEC 15438:2001(E)</li>
<li><code>QRCode</code> - Standard ISO/IEC 18004:2006</li>
<li>etc.</li>
</ul>
    </content>
  </feature>

  <!-- barcode4j -->
  
  <feature name="barcode4j" title="Barcodes (Barcode4J Custom Component)">
    <description>
Shows how to render barcodes in a report, using the barcode component based on the <a href="http://barcode4j.sourceforge.net/">Barcode4J</a> library.
    </description>
    <since>3.5.2</since>
    <documentedBy>
      <author>
    	<name>Sanda Zaharia</name>
    	<email>shertage@users.sourceforge.net</email>
      </author>
    </documentedBy>
    <content>
<b>The Barcode4J Library</b>    
<br/>
<br/>
Today barcodes are present almost everywhere: in wholesales as well as in retails, on the bills, in airports, libraries, banks, hospitals, hotels, theaters, 
amusement parks, on the internet, and the list could continue... Due to this ubiquity, there is an increasing need of barcode components in the reporting area. 
Powerful reporting engines should now provide support for as many as possible barcode symbologies. To cover a large category of customer needs, JR comes with 2 
built-in barcode components, and in addition, it also makes room for other complementary implementations. This sample illustrates how to use the built-in 
component mostly based on the open source Barcode4J library.
<br/>
The Barcode4J library supports the following symbologies:
<ul>
<li>linear:
<ul>
<li><code>Code 25 – Interleaved 2 of 5</code></li>
<li><code>Codabar</code></li>
<li><code>ITF-14</code></li>
<li><code>Code 39</code> - International standard ISO/IEC 16388</li>
<li><code>Code 128</code> – International Standard ISO/IEC 15417</li>
<li><code>EAN-128, GS1-128 (based on Code 128)</code></li>
<li><code>EAN-13 and EAN-8 (with supplementals)</code></li>
<li><code>UPC-A and UPC-E (with supplementals)</code></li>
<li><code>POSTNET</code></li>
<li><code>Royal Mail Customer Barcode (Four State)</code></li>
<li><code>USPS Intelligent Mail (4-State Customer Barcode)</code></li>
</ul>
</li>
<li>2D:
<ul>
<li><code>DataMatrix</code></li>
<li><code>PDF 417</code></li>
</ul>
</li>
</ul>
<b>Note: </b>The <code>QRCode</code> 2D-symbology being not yet supported in Barcode4J, its related component implementation in JasperReports is based on the ZXing library.
<br/>
<br/>
Multiple output formats are also supported:
<ul>
<li><code>SVG</code></li>
<li><code>EPS</code></li>
<li>Bitmap images (such as <code>PNG</code> or <code>JPEG</code>)</li>
<li><code>Java2D</code></li>
<li><code>Text</code> - for testing and debugging only</li>
</ul>
<b>The Barcode4J Component</b>
<br/>
<br/>
Each of Barcode4J supported symbologies enumerated above is characterized by a common structure of elements and attributes described 
in the <api href="api/net/sf/jasperreports/barcode4j/Barcode4jComponent.html">Barcode4jComponent</api> parent element, and their specific difference given as additional extracontent:
<ul>
<li><api href="api/net/sf/jasperreports/barcode4j/CodabarComponent.html">CodabarComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/Code39Component.html">Code39Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/Code128Component.html">Code128Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/EAN8Component.html">EAN8Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/EAN13Component.html">EAN13Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/EAN128Component.html">EAN128Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/DataMatrixComponent.html">DataMatrixComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/Interleaved2Of5Component.html">Interleaved2Of5Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/PDF417Component.html">PDF417Component</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/POSTNETComponent.html">POSTNETComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/QRCodeComponent.html">QRCodeComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/RoyalMailCustomerComponent.html">RoyalMailCustomerComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/UPCAComponent.html">UPCAComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/UPCEComponent.html">UPCEComponent</api></li>
<li><api href="api/net/sf/jasperreports/barcode4j/USPSIntelligentMailComponent.html">USPSIntelligentMail</api></li>
</ul>
The basic <api href="api/net/sf/jasperreports/barcode4j/Barcode4jComponent.html">Barcode4jComponent</api> structure 
is characterized by the following series of elements:
<ul>
<li><code>codeExpression</code></li>
<li><code>patternExpression</code></li>
</ul> 
and contains the following attributes:
<ul>
<li><code>evaluationTime</code> - the <code>evaluationTime</code> attribute of any JR report element</li>
<li><code>evaluationGroup</code> - the <code>evaluationGroup</code> attribute of any JR report element</li>
<li><code>orientation</code> - specifies the rotation of the generated barcode image in degrees (allowed values are: 0, 90, 180, 270), 
or their text equivalents: <code>up</code>, <code>left</code>, <code>right</code>, <code>down</code>. 
The default value is 0.</li>
<li><code>moduleWidth</code> - specifies the narrow module width (in points). This will be converted in mm at runtime.</li>
<li><code>textPosition</code> - specifies the text presence and its position relative to the bar. Allowed values are: 
<code>none</code>, <code>bottom</code>, <code>top</code>.</li>
<li><code>quietZone</code> - specifies the width of the quiet zone left and right of the barcode in points. This will be 
converted in mm at runtime.</li>
<li><code>verticalQuietZone</code> - specifies the height of the vertical quiet zone above and below the barcode in points. 
This will be converted in mm at runtime.</li>
</ul> 
Another attribute available for almost all <code>Barcode4j</code> elements is the <code>checksumMode</code>. Allowed values are 
<code>auto</code>, <code>ignore</code>, <code>add</code> and <code>check</code>.
<br/>
<br/>
Starting with JasperReports 5.1.2 a <code>templateExpression</code> is available for the 
<code>EAN128</code>
component, in order to allow custom configuration for the human readable part of the barcode. The format of the <code>templateExpression</code> 
must conform to rules specified in the <a href="http://barcode4j.sourceforge.net/2.1/symbol-ean-128.html">official documentation</a>:
<br/>
<br/>
&apos;The format of &quot;template&quot; is a repeating set of AI number (in brackets) followed by a field description. The allowed data types are &quot;n&quot; (numeric), &quot;an&quot; 
(alpha-numeric), &quot;d&quot; (date) and &quot;cd&quot; (check digit). &quot;cd&quot; will calculate the check digit starting with the first character after the AI. &quot;cd0&quot; will 
include the AI in the check digit calculation (used for USPS). Multiple field parts can be separated by &quot;+&quot; characters.&apos;
<br/>
<br/>
<b>The QRCode component</b>
<br/>
<br/>
This barcode component depends on <a href="https://github.com/zxing/zxing">ZXing</a> library. It shares some common features with the other barcode components:
<ul>
<li>Common expressions: 
<ul>
<li><code>codeExpression</code> - provides the text content used to generate the barcode object.</li>
</ul> 
</li>
<li>Common attributes:
<ul>
<li><code>evaluationTime</code></li>
<li><code>evaluationGroup</code></li>
</ul>
</li>
</ul>
Specific attributes for this component are enumerated below:
<ul>
<li><code>margin</code> - number of pixels reserved as margin around the barcode graphic.</li>
<li><code>errorCorrectionLevel</code> - enabled; single uppercase character representing the error correction level. 
Possible values are: <code>L</code>, <code>M</code>, <code>Q</code>, <code>H</code>. Default is <code>L</code>.</li>
</ul>
<b>Barcode4J Samples</b>
<br/>
<br/>
Some examples of howto use the available <code>Barcode4j</code> components are given in the JRXML sample:
<pre><![CDATA[
<element kind="component" uuid="17dc8c86-0d9c-4542-b153-71844a13bfe5" x="130" y="100" width="200" height="30" style="Barcode">
  <component kind="barcode4j:Code128" moduleWidth="1.0">
    <codeExpression><![CDATA["0123456789"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="a8dd7541-3d7d-44fc-9281-2bf0bd7ff556" x="130" y="135" width="200" height="30" style="Barcode">
  <component kind="barcode4j:Codabar" moduleWidth="1.2" textPosition="none" wideFactor="4.0">
    <codeExpression><![CDATA["01234567890"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="3955570e-f418-4cf2-9a94-cbed633f8e68" x="130" y="170" width="70" height="40" style="Barcode">
  <component kind="barcode4j:DataMatrix" moduleWidth="4.0">
    <codeExpression><![CDATA["JasperReports"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="d5a009ab-4cd5-401e-96c8-9ba64b1fc8e9" x="130" y="215" width="250" height="30" style="Barcode">
  <component kind="barcode4j:EAN128" moduleWidth="1.4" checksumMode="check">
    <codeExpression><![CDATA["0101234567890128"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="7fc9f508-28ba-4b6e-bf7d-2e5e39b98ed8" x="130" y="250" width="400" height="30" style="Barcode">
  <component kind="barcode4j:Code39">
    <codeExpression><![CDATA["0123456789"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="8fdd4d61-26b7-4a0e-b569-18d70d929c10" x="130" y="285" width="400" height="30" style="Barcode">
  <component kind="barcode4j:USPSIntelligentMail" ascenderHeight="8.0" trackHeight="10.0">
    <codeExpression><![CDATA["00040123456200800001987654321"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="4d2d0a42-1318-4873-8572-3cca99ebde50" x="130" y="320" width="400" height="30" style="Barcode">
  <component kind="barcode4j:RoyalMailCustomer" ascenderHeight="8.0" intercharGapWidth="2.5" trackHeight="10.0">
    <codeExpression><![CDATA["0123456789"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="26bab176-29df-4677-ba6a-e8df79eea8e1" x="130" y="355" width="400" height="30" style="Barcode">
  <component kind="barcode4j:Interleaved2Of5">
    <codeExpression><![CDATA["0123456789"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="234c47ef-0149-43aa-9595-44eb81a2bd54" x="130" y="390" width="400" height="30" style="Barcode">
  <component kind="barcode4j:UPCA">
    <codeExpression><![CDATA["01234567890"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="51b4da4c-b93b-4757-9f6e-8757a6716ea1" x="130" y="425" width="400" height="30" style="Barcode">
  <component kind="barcode4j:UPCE">
    <codeExpression><![CDATA["01234133"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="35e15c85-135e-4e4a-ada4-3caab948d304" x="130" y="460" width="400" height="30" style="Barcode">
  <component kind="barcode4j:EAN13">
    <codeExpression><![CDATA["012345678901"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="00eb6f75-bdf7-408a-ba56-f76ecca2f8e6" x="130" y="495" width="400" height="30" style="Barcode">
  <component kind="barcode4j:EAN8">
    <codeExpression><![CDATA["01234565"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="16fee5fe-1e0f-4f56-b240-64a2ff904744" x="130" y="530" width="400" height="20" style="Barcode">
  <component kind="barcode4j:POSTNET" shortBarHeight="10.0" checksumMode="add">
    <codeExpression><![CDATA["01234"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="f8257c9c-cc13-40f4-8c1e-b2dda037fb3d" x="130" y="555" width="400" height="30" style="Barcode">
  <component kind="barcode4j:PDF417" moduleWidth="4.0">
    <codeExpression><![CDATA["JasperReports"]] ></codeExpression>
  </component>
</element>
...
<element kind="component" uuid="f8257c9c-cc13-40f4-8c1e-b2dda037fb3d" mode="Opaque" x="130" y="600" width="400" height="80" forecolor="#0000FF" backcolor="#FFFF00" style="Barcode">
  <component kind="barcode4j:QRCode" margin="2" errorCorrectionLevel="M">
    <codeExpression><![CDATA["http://barcode4j.sourceforge.net/"]] ></codeExpression>
  </component>
</element>
]]></pre>
<b>Running the Sample</b>
<br/>
<br/>
Running the sample requires the <a href="https://maven.apache.org/">Apache Maven</a> library. Make sure that <code>maven</code> is already installed on your system (version 3.6 or later).
<br/>
In a command prompt/terminal window set the current folder to <code>demo/samples/barcode4j</code> within the JasperReports source project 
and run the following command:
<br/>
<br/>
<code>&gt; mvn exec:java</code>
<br/>
<br/>
It will generate all supported document types containing the sample report in the <code>demo/samples/barcode4j/target/reports</code> directory.
    </content>
  </feature>
</sample>
