<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FoodMartSales-XMLAReport" pageWidth="595" pageHeight="842" columnWidth="515" leftMargin="40" rightMargin="40" topMargin="50" bottomMargin="50" uuid="2357a2a9-5ac5-4cd9-abdb-9a373bcb20b7">
	<style name="Sans_Normal" isDefault="true" fontName="DejaVu Sans" fontSize="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
	<style name="Sans_Bold" fontName="DejaVu Sans" fontSize="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
	<queryString language="mdx">
		<![CDATA[select NON EMPTY {[Measures].[Unit Sales], [Measures].[Customer Count]} ON COLUMNS,
  NON EMPTY Crossjoin(
  	{[Store].[All Stores], [Store].[All Stores].[USA].[CA], [Store].[All Stores].[USA].[OR], [Store].[All Stores].[USA].[WA]},
  	 Crossjoin({[Time.Weekly].[2018], [Time.Weekly].[2018].[1], [Time.Weekly].[2018].[2], [Time.Weekly].[2018].[3], [Time.Weekly].[2018].[4]},
  	 	 {[Customers].[All Customers], [Customers].[All Customers].[USA].[CA], [Customers].[All Customers].[USA].[OR], [Customers].[All Customers].[USA].[WA]}))
  	 	 ON ROWS
from [Sales]]]>
	</queryString>
	<field name="StoreState" class="java.lang.String">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Rows[Store][Store State]"/>
	</field>
	<field name="Week" class="java.lang.String">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Rows[Time.Weekly][Week]"/>
	</field>
	<field name="CustomerState" class="java.lang.String">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Rows[Customers][State Province]"/>
	</field>
	<field name="UnitSales" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(0,?)"/>
	</field>
	<field name="CustomerCount" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(1,?)"/>
	</field>
	<field name="StoreStateUnitSales" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(Rows[Store][Store State],Rows[Time.Weekly][Year],Rows[Customers][(All)])(0,?)"/>
	</field>
	<field name="StoreStateCustCount" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(Rows[Store][Store State],Rows[Time.Weekly][Year],Rows[Customers][(All)])(1,?)"/>
	</field>
	<field name="TotalStoreStateUnitSales" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(Rows[Store][(All)],Rows[Time.Weekly][Year],Rows[Customers][(All)])(0,?)"/>
	</field>
	<field name="TotalStoreStateCustCount" class="java.lang.Number">
		<property name="net.sf.jasperreports.olap.field.mapping" value="Data(Rows[Store][(All)],Rows[Time.Weekly][Year],Rows[Customers][(All)])(1,?)"/>
	</field>
	<group name="StoreState">
		<groupExpression><![CDATA[$F{StoreState}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<textField evaluationTime="Group" evaluationGroup="StoreState">
					<reportElement style="Sans_Bold" x="10" y="0" width="150" height="15" uuid="5607b4dd-2fcb-478c-b6ed-d084e02ec3b3"/>
					<textFieldExpression><![CDATA["Store " + $F{StoreState}]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="StoreState" pattern="$#,##0.00">
					<reportElement style="Sans_Bold" x="180" y="0" width="100" height="15" uuid="c5599c8c-0a95-4b81-a585-2f5033ec24b5"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression><![CDATA[$F{StoreStateUnitSales}]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="StoreState" pattern="#,###">
					<reportElement style="Sans_Bold" x="300" y="0" width="100" height="15" uuid="6a9608b9-d4f3-4879-bdba-2e46e8b24498"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression><![CDATA[$F{StoreStateCustCount}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="Time">
		<groupExpression><![CDATA[$F{Week}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<textField evaluationTime="Group" evaluationGroup="Time">
					<reportElement style="Sans_Bold" x="10" y="0" width="150" height="15" uuid="6b46c54d-e171-4a0f-a48d-30e13960802d"/>
					<textFieldExpression><![CDATA[$F{Week}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<pageHeader>
		<band height="16">
			<frame>
				<reportElement mode="Opaque" x="0" y="0" width="515" height="15" backcolor="#E0E0E0" uuid="d55ccfc0-09df-4179-a803-596442c3f666"/>
				<box>
					<pen lineWidth="0.5"/>
				</box>
				<staticText>
					<reportElement x="20" y="0" width="150" height="15" uuid="eb8d7e5f-deb0-4ae9-9bac-1db8774a84e4"/>
					<textElement verticalAlignment="Middle"/>
					<text><![CDATA[Store State]]></text>
				</staticText>
				<staticText>
					<reportElement x="180" y="0" width="100" height="15" uuid="732a95f4-4fbc-4d55-83cf-e4d6d0801c7c"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<text><![CDATA[Unit Sales ($)]]></text>
				</staticText>
				<staticText>
					<reportElement x="300" y="0" width="100" height="15" uuid="156b50f0-3285-43be-9ef3-6aaf84dc113b"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<text><![CDATA[# Customers]]></text>
				</staticText>
			</frame>
		</band>
	</pageHeader>
	<detail>
		<band height="16">
			<textField>
				<reportElement x="20" y="0" width="150" height="15" uuid="c43afe2e-619b-4908-a694-e7bb252da6f8"/>
				<textFieldExpression><![CDATA["Customers from " + $F{CustomerState}]]></textFieldExpression>
			</textField>
			<textField pattern="$#,##0.00">
				<reportElement x="180" y="0" width="100" height="15" uuid="26b9f163-e55d-46e6-aa55-d05cc9e929f5"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{UnitSales}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###">
				<reportElement x="300" y="0" width="100" height="15" uuid="b1be57ef-bd9c-438a-8ee7-bceffb6ea29a"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$F{CustomerCount}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="16">
			<frame>
				<reportElement mode="Opaque" x="0" y="0" width="515" height="15" backcolor="#E0E0E0" uuid="4854a600-8fc2-424c-91aa-5552e7c5ca69"/>
				<box>
					<pen lineWidth="0.5"/>
				</box>
				<textField>
					<reportElement style="Sans_Bold" x="10" y="0" width="150" height="15" uuid="191356da-c3ff-453b-b73b-1aa337f2ae0f"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA["Totals"]]></textFieldExpression>
				</textField>
				<textField pattern="$#,##0.00">
					<reportElement style="Sans_Bold" x="180" y="0" width="100" height="15" uuid="e75b7747-764b-4e80-8498-c496501f7dce"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{TotalStoreStateUnitSales}]]></textFieldExpression>
				</textField>
				<textField pattern="#,###">
					<reportElement style="Sans_Bold" x="300" y="0" width="100" height="15" uuid="1548ee4f-e36a-4508-95b3-e6584cf5317f"/>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{TotalStoreStateCustCount}]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</summary>
</jasperReport>
