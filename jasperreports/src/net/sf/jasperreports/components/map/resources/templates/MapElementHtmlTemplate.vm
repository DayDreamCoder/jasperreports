<div style='width: ${elementWidth}px; height: ${elementHeight}px;
	#if(${backgroundColor}) 
		background-color: \#${backgroundColor};
	#end
'>
	<div id='${mapCanvasId}' style='width: 100%; height: 100%; overflow: auto'></div>
</div>

#if (!${gotReportContext})
	#if (${exporterFirstAttempt})
		#if(${reqParams})
	<script src='https://maps.googleapis.com/maps/api/js?${reqParams}&callback=initMap' defer></script>
		#else
	<script src='https://maps.googleapis.com/maps/api/js?callback=initMap' defer></script>
		#end
	<script src='https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js' defer></script>
	<script type="text/javascript">
		${jasperreportsMapApiScript}
		window.addEventListener('DOMContentLoaded', () => {
			var map = new google.maps.Map(document.getElementById('${mapCanvasId}'), {
				zoom: ${zoom},
				center: new google.maps.LatLng(${latitude}, ${longitude}),
				mapTypeId: google.maps.MapTypeId.${mapType},
				autocloseinfo: true
			});
			var markers = ${markerList};
			jasperreports.map.placeMarkers(markers, map);
			var paths = ${pathsList};
			jasperreports.map.drawPaths(paths, map);
		});
	</script>
	#else
	<script type="text/javascript">
		window.addEventListener('DOMContentLoaded', () => {
			var map = new google.maps.Map(document.getElementById('${mapCanvasId}'), {
						zoom: ${zoom},
						center: new google.maps.LatLng(${latitude}, ${longitude}), 
						mapTypeId: google.maps.MapTypeId.${mapType},
						autocloseinfo: true
					});
			var markers = ${markerList};
			jasperreports.map.placeMarkers(markers, map);
			var paths = ${pathsList};
			jasperreports.map.drawPaths(paths, map);
		});
	</script>
	#end
#end