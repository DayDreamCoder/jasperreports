<?xml version="1.0" encoding="UTF-8"?>

<sample>

  <name>list</name>
  <title>List Component Sample</title>
  <description>Illustrates the usage of the list component element.</description>

  <mainFeature ref="list"/>
  
  <!-- list -->
  
  <feature name="list" title="Using the Built-in List Component">
    <description>
How to render simple listings using the built-in list component and a subdataset.
    </description>
    <since>3.5.1</since>
    <documentedBy>
      <author>
      <name>Sanda Zaharia</name>
      <email>shertage@users.sourceforge.net</email>
      </author>
    </documentedBy>
    <otherSample ref="table"/>
    <content>
<subtitle name="overview">The Built-in List Component - Overview</subtitle>
<br/>
<br/>
The most common way to process data from datasources/queries different from the report's datasource/query is to use subreports. 
But working with subreports always requires to create and compile separate report templates, one per each subreport, even for 
the most simple situation that can be imagined. 
<br/>
For instance, let's consider a subreport containing a single textfield, ready to be used in a detail band. In this case we need a 
separate report template containing this only textfield to be created and then maintained along with the master report, in order to 
generate a column of data at fill time. This particular layout is easily recognized as a list of data. So, why not use a dedicated 
list component instead, which combines the advantages of subreports with a specific mechanism to avoid separate report templates creation 
and maintenance?
<br/>
This is the main purpose of the built-in list component. It also provides support for complex content, so that users may define more than 
single textfields as list content elements, as shown in the following section.
<br/>
<br/>
<subtitle name="structure">The List Component Structure</subtitle>
<br/>
<br/>
A list needs only two elements in order to become functional: a dataset run and a list content.
<ul>
<li><code>datasetRun</code> - the dataset run used to store information about list datasource/connection/subdataset and various useful 
parameters.</li>
<li><code>contents</code> - this element stores the layout information for list entries. The layout will be repeated for each row 
in the dataset. Any kind of JasperReports element may be part of a list content.</li>
</ul>
The <code>printOrder</code> attribute in the list component specifies how to render the list elements: in a vertical sequence or in a horizontal one. 
The default value is <code>Vertical</code>.
<br/>
The <code>ignoreWidth</code> flag is used when the print order is <code>Horizontal</code> to indicate the list behavior when the width set for the list 
component is reached. Unless the flag is set to <code>true</code>, the list list will break by default when the critical width is reached. By default the 
flag is unset.
<br/>
The <code>contents</code> element can be customized with 2 attributes:
<ul>
<li><code>height</code> - specifies the height of each list entry and is mandatory.</li>
<li><code>width</code> - specifies  the width of each list entry and is optional.</li>
</ul>
<subtitle name="sample">The List Component Sample</subtitle>
<br/>
<br/>
This sample shows how to use the built-in list component for both <code>Vertical</code> and <code>Horizontal</code> printing order.
In the <code>ListReport.jrxml</code> sample is configured a <code>Vertical</code> list component as follows:
<pre><![CDATA[
<element kind="component" y="25" width="250" height="20">
  <component kind="list" printOrder="Vertical">
    <datasetRun  subDataset="Addresses">
      <parameter name="City">
        <expression><![CDATA[$F{City}]] ></expression>
      </parameter>
    </datasetRun>
    <contents height="14">
      <element kind="frame" width="250" height="14" style="ListRow">
        <element kind="textField" y="2" width="15" height="10" hTextAlign="Right" style="Sans_Small">
          <expression><![CDATA[$F{Id}]] ></expression>
        </element>
        <element kind="textField" positionType="Float" x="20" y="2" width="110" height="10" textAdjust="StretchHeight" style="Sans_Small">
          <expression><![CDATA[$F{FirstName} + " " + $F{LastName}]] ></expression>
        </element>
        <element kind="textField" positionType="Float" x="135" y="2" width="105" height="10" textAdjust="StretchHeight" style="Sans_Small">
          <expression><![CDATA[$F{Street}]] ></expression>
        </element>
      </element>
    </contents>
  </component>
</element>]]></pre>
A list containing the ID, name and address is generated for each city in the datasource and list entries are printed in the default <code>Vertical</code> order.
<br/>
For the horizontally printed list, let's take a look to the <code>HorizontalListReport.jrxml</code> sample:
<pre><![CDATA[
<element kind="component" y="25" width="515" height="40">
  <component kind="list" printOrder="Horizontal">
    <datasetRun subDataset="Addresses">
      <parameter name="City">
        <expression><![CDATA[$F{City}]] ></expression>
      </parameter>
    </datasetRun>
    <contents height="40" width="128">
      <element kind="frame" stretchType="ContainerHeight" x="4" width="120" height="38" style="ListCell">
        <element kind="textField" y="2" width="100" height="12" style="Sans_SmallBold">
          <expression><![CDATA["#" + $V{REPORT_COUNT} + " - " + $F{Id}]] ></expression>
        </element>
        <element kind="textField" positionType="Float" x="10" y="14" width="110" height="12" textAdjust="StretchHeight" style="Sans_Small">
          <expression><![CDATA[$F{FirstName} + " " + $F{LastName}]] ></expression>
        </element>
        <element kind="textField" positionType="Float" x="10" y="26" width="110" height="12" textAdjust="StretchHeight" style="Sans_Small">
          <expression><![CDATA[$F{Street} + ", " + $F{City}]] ></expression>
        </element>
        <box style="ListCell">
          <topPen lineWidth="0.5"/>
          <bottomPen lineWidth="0.5"/>
        </box>
      </element>
    </contents>
  </component>
</element>
]]></pre>
Here each list entry is printed one after another horizontally, for each city in the datasource.
<br/>
<br/>
<b>Running the Sample</b>
<br/>
<br/>
Running the sample requires the <a href="https://maven.apache.org/">Apache Maven</a> library. Make sure that <code>maven</code> is already installed on your system (version 3.6 or later).
<br/>
In a command prompt/terminal window set the current folder to demo/hsqldb within the JasperReports source project and run the following command:
<br/>
<code>&gt; mvn exec:java</code>
<br/>
This will start the HSQLDB server shipped with the JasperReports distribution package. Let this terminal running the HSQLDB server.
<br/>
Open a new command prompt/terminal window and set the current folder to demo/samples/list within the JasperReports source project and run the following command:
<br/>
<code>&gt; mvn clean compile exec:java</code>
<br/>
This will generate all supported document types containing the sample report in the demo/sampleslist/target/reports directory.
    </content>
  </feature>

</sample>
